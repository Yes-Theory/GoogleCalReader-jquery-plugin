!function(u){u.fn.gCalReader=function(e){var i=u(this),o=u.extend({calendarId:"en.usa#holiday@group.v.calendar.google.com",apiKey:"Public_API_Key",dateFormat:"LongDate",errorMsg:"No events in calendar",maxEvents:50,futureEventsOnly:!0,sortDescending:!0,renderFunc:void 0},e),l="",a="https://www.googleapis.com/calendar/v3/calendars/"+encodeURIComponent(o.calendarId.trim())+"/events?key="+o.apiKey+"&orderBy=startTime&singleEvents=true";o.futureEventsOnly&&(a+="&timeMin="+(new Date).toISOString()),u.ajax({url:a,dataType:"json",success:function(e){o.sortDescending&&(e.items=e.items.reverse()),e.items=e.items.slice(0,o.maxEvents),u.each(e.items,function(e,a){var t=a.start.dateTime||a.start.date||"",r=a.summary||"",n=a.description,s=a.location,d=function(e,a){var t,r,n,s,d={full:["","January","February","March","April","May","June","July","August","September","October","November","December"],short:["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},i={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};10<e.length?(r=/(\d+)\-(\d+)\-(\d+)T(\d+)\:(\d+)/.exec(e),n=r[4]<12,0===(s=n?parseInt(r[4])+":"+r[5]+" AM":r[4]-12+":"+r[5]+" PM").indexOf("0")&&(s=1===s.indexOf(":00")?5===s.indexOf("AM")?"MIDNIGHT":"NOON":s.replace("0:","12:"))):(r=/(\d+)\-(\d+)\-(\d+)/.exec(e),s="Time not present in feed.");var o=parseInt(r[1]),l=parseInt(r[2]),u=parseInt(r[3]),c=new Date(o,l-1,u);switch(a){case"ShortTime":t=s;break;case"ShortDate":t=l+"/"+u+"/"+o;break;case"LongDate":t=i.full[c.getDay()]+" "+d.full[l]+" "+u+", "+o;break;case"LongDate+ShortTime":t=i.full[c.getDay()]+" "+d.full[l]+" "+u+", "+o+" "+s;break;case"ShortDate+ShortTime":t=l+"/"+u+"/"+o+" "+s;break;case"DayMonth":t=i.short[c.getDay()]+", "+d.full[l]+" "+u;break;case"MonthDay":t=d.full[l]+" "+u;break;case"YearMonth":t=d.full[l]+" "+o;break;default:t=i.full[c.getDay()]+" "+d.short[l]+" "+u+", "+o+" "+s}return t}(t,o.dateFormat.trim());null==o.renderFunc?(l='<div class="eventtitle">'+r+"</div>",l+='<div class="eventdate"> When: '+d+"</div>",s&&(l+='<div class="location">Where: '+s+"</div>"),n&&(l+='<div class="description">'+n+"</div>"),u(i).append("<li>"+l+"</li>")):u(i).append(o.renderFunc(t,r,n,s))})},error:function(e,a){u(i).append("<p>"+a+" : "+o.errorMsg+"</p>")}})}}(jQuery);